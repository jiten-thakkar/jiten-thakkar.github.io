<!-- Ocean Theme - Auto Apply -->
<script>
(function() {
    // Force Ocean theme as default
    const theme = 'ocean';

    // Apply immediately
    document.documentElement.setAttribute('data-scheme', theme);

    // Store in localStorage
    localStorage.setItem('user-color-scheme', theme);
    localStorage.setItem('StackColorScheme', 'light');

    // Apply on page load
    window.addEventListener('load', function() {
        document.documentElement.setAttribute('data-scheme', theme);
    });

    // Re-apply periodically to prevent Stack from overriding
    setInterval(function() {
        const currentScheme = document.documentElement.getAttribute('data-scheme');
        if (currentScheme !== theme) {
            document.documentElement.setAttribute('data-scheme', theme);
        }
    }, 500);
})();
</script>

<!-- Remove ** markers from captions -->
<script>
(function() {
    function cleanCaptions() {
        // Find all figcaption elements and their children
        const captions = document.querySelectorAll('figcaption, figcaption *');

        captions.forEach(function(element) {
            // Get all text nodes and clean them
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }

            textNodes.forEach(function(textNode) {
                textNode.textContent = textNode.textContent.replace(/\*\*/g, '');
            });

            // Also clean innerHTML as fallback
            if (element.innerHTML) {
                element.innerHTML = element.innerHTML.replace(/\*\*/g, '');
            }
        });

        console.log('Cleaned captions - found', document.querySelectorAll('figcaption').length, 'figcaption elements');
    }

    // Run immediately
    cleanCaptions();

    // Run when DOM is loaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', cleanCaptions);
    }

    // Also run after delays to catch dynamically loaded content
    setTimeout(cleanCaptions, 50);
    setTimeout(cleanCaptions, 100);
    setTimeout(cleanCaptions, 500);
    setTimeout(cleanCaptions, 1000);

    // Run on window load as final attempt
    window.addEventListener('load', cleanCaptions);
})();
</script>
