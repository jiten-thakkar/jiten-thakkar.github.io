<!-- Ocean Theme as Default (but allow dark mode toggle) -->
<script>
(function() {
    // Set Ocean theme as default only if no preference is saved
    const savedScheme = localStorage.getItem('StackColorScheme');

    if (!savedScheme) {
        // First time visitor - set Ocean theme as default
        document.documentElement.setAttribute('data-scheme', 'ocean');
        localStorage.setItem('StackColorScheme', 'light');
    }
    // If user has toggled dark mode before, respect their choice
})();
</script>

<!-- Remove ** markers from captions -->
<script>
(function() {
    function cleanCaptions() {
        // Find all figcaption elements and their children
        const captions = document.querySelectorAll('figcaption, figcaption *');

        captions.forEach(function(element) {
            // Get all text nodes and clean them
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                textNodes.push(node);
            }

            textNodes.forEach(function(textNode) {
                textNode.textContent = textNode.textContent.replace(/\*\*/g, '');
            });

            // Also clean innerHTML as fallback
            if (element.innerHTML) {
                element.innerHTML = element.innerHTML.replace(/\*\*/g, '');
            }
        });

        console.log('Cleaned captions - found', document.querySelectorAll('figcaption').length, 'figcaption elements');
    }

    // Run immediately
    cleanCaptions();

    // Run when DOM is loaded
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', cleanCaptions);
    }

    // Also run after delays to catch dynamically loaded content
    setTimeout(cleanCaptions, 50);
    setTimeout(cleanCaptions, 100);
    setTimeout(cleanCaptions, 500);
    setTimeout(cleanCaptions, 1000);

    // Run on window load as final attempt
    window.addEventListener('load', cleanCaptions);
})();
</script>
