---
layout: post
title: Update of GSoC Till Midterm Evaluation
date: '2012-07-12T10:47:00.000-07:00'
author: Jiten Thakkar
tags:
- GSoc 2012
- Networking Dashboard
- Mozilla
- Update
modified_time: '2012-07-13T02:25:02.861-07:00'
blogger_id: tag:blogger.com,1999:blog-4257776574536372826.post-1094546596417016506
blogger_orig_url: http://netij.blogspot.com/2012/07/update-till-midterm-evaluation.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on">I have been working on Networking Dashboard for quite a while now and I think the back end part of the project is nearly done. It involves porting out information related to connections of different protocols(HTTP,WebSocket,etc.) through different interfaces.<br />This blog is an update on how much has been done so far and what am I going to get done in future.<br /><br /><b>What has been done so far?</b><br />So far I have implemented four interfaces. Every interface returns a JSON string containing different information in different fields.<br /><br />1) <b>nsIHttpConnectionLog.idl</b> :- This interface returns following information related to current HTTP connections in form of a JSON string,<br /><br />-&nbsp;<span style="background-color: white;">host : Host name of the HTTP connection</span><br />- port : port no. of the connection<br />- spdy : If connection using spdy or not<br />- active : rtt(Round Trip Time) and ttl(Time To Live) of active connections in respective fields<br />- idle : rtt and ttl of idle connections&nbsp;<span style="background-color: white;">in respective fields</span><br /><span style="background-color: white;"><br /></span><br /><span style="background-color: white;">The connection data has been collected from <a href="http://mxr.mozilla.org/mozilla-central/source/netwerk/protocol/http/nsHttpConnectionMgr.h#264" target="_blank">nsHttpConnectionMgr.h</a> where data related to http connection is maintained in form of a hash table.</span><br /><span style="background-color: white;">Following is the example of a JSON string which is returned from this interface after opening www.google.com followed by www.twitter.com:</span><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> {  <br />   "host" : ["mail.google.com","www.google-analytics.com","accounts.google.com","api.twitter.com","ocsp.thawte.com","localhost","accounts.youtube.com","a0.twimg.com","www.mozilla.org","ssl.gstatic.com","ssl.google-analytics.com","gmail.com","scribe.twitter.com","twitter.com","mail.google.com"],  <br />   "port" : [443,80,443,80,80,80,443,80,80,443,443,80,80,80,80],  <br />   "active" : [{  <br />     "rtt" : [0],  <br />     "ttl" : [145]  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [143]  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [144]  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [144]  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [145]  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   }],  <br />   "idle" : [{  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [95]  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [86]  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [79]  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [0,0,0,0],  <br />     "ttl" : [89,86,85,85]  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [],  <br />     "ttl" : []  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [75]  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [86]  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [85]  <br />   },  <br />   {  <br />     "rtt" : [0],  <br />     "ttl" : [75]  <br />   }],  <br />   "spdy" : [true,false,true,false,false,false,true,false,false,true,true,false,false,false,false]  <br /> }  <br /></code></pre><span style="background-color: white;">Empty ttl and rtt array means that that there is no connection with the host.</span><br /><span style="background-color: white;">You can have a better look at it using any online JSON editor. Sorry for posting such long JSON. It looks ugly if I don't format it this way.</span><br /><span style="background-color: white;"><br /></span><br /><span style="background-color: white;">2) <b>nsIWebSocketConnectionLog.idl :-&nbsp;</b></span><span style="background-color: white;">This interface returns following information related to current WebSocket connections in form of a JSON string,</span><br /><span style="background-color: white;"></span><br />- hostport : Host name and port of the WebSocket connection<br />- msgsent : No. of messages sent<br />- msgreceived : No. of messages received<br />- encrypted : If the connection secure or not<br /><br />There is no maintained data available for WebSocket. So all the data related to the connections is maintained at the implementation of the interface(in file nsWebSocketConnectionLog.h) Every time a new connection is made with new host or an old connection is closed, an entry is made or removed from the database if an instance of the interface has been created.<br /><br />I found websites using WebSocket from <a href="http://www.websocket.org/" target="_blank">www.websocket.org</a>.<br />Here is one example of JSON string returned from the interface after opening <a href="http://rumpetroll.com/" target="_blank">http://rumpetroll.com/</a>&nbsp;and wandering around a little bit and after that <a href="http://www.kaazing.me/" target="_blank">http://www.kaazing.me</a> :<br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> {  <br />   "hostport" : ["rumpetroll.motherfrog.com:8180","demo.kaazing.com"],  <br />   "msgsent" : [76,8],  <br />   "msgreceived" : [99,223],  <br />   "encrypted" : [false,true]  <br /> }  <br /></code></pre><span style="background-color: white;">3) </span><b style="background-color: white;">nsISocketLog.idl</b><span style="background-color: white;"> -&nbsp;</span><span style="background-color: white;">This interface returns following information related to current Socket connections in form of a JSON string,</span><span style="background-color: white;"></span><br /><span style="background-color: white;"><br /></span></div>- host : peer host ip<br />- port : peer host port<br />- tcp : if the connection is TCP or not<br /><br />Data related to socket is collected from <a href="http://mxr.mozilla.org/mozilla-central/source/netwerk/base/src/nsSocketTransportService2.h#129">nsSocketTransportService2.h</a>.<br />The data returned after opening www.google.com and http://twitter.com/<br />in above example is:<br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> {  <br />   "host" : ["74.125.236.102","199.59.149.243","124.124.201.161","199.59.150.41","124.124.201.161","124.124.201.161","124.124.201.161","199.59.150.7","74.125.236.98","74.125.236.117","173.194.36.30","74.125.236.111","209.85.175.84","74.125.236.118","199.7.51.72","74.125.236.117"],  <br />   "port" : [20480,20480,20480,20480,20480,20480,20480,20480,47873,47873,47873,47873,47873,20480,20480,20480],  <br />   "tcp" : [true,true,true,true,true,true,true,true,false,false,false,false,false,true,true,true]  <br /> }  <br /></code></pre><span style="background-color: white;">This data is not much I am hoping to add some more fields(like total data sent and received) to this interface.</span><br />4) <b>nsDNSEntries.idl</b>&nbsp;- This interface returns cached entries in DNS cache with &nbsp; <br />&nbsp; &nbsp; following fields,<br /><br />- hostname : name of the host<br />- hostaddr : ip address of the host<br />- family : ip address family(ipv4 or ipv6)<br />- expiration : time when the cache entry expires(in minutes)<br /><br />Well, this interface is near completion(believe me,it is). One little difficulty is stopping me from posting it's output here. May be I post it in the comment after it's done. It's going to contain above fields.<br /><br />This concludes what I have completed so far.<br />I have been maintaining a mozilla-central repository at <a href="https://bitbucket.org/Jiten/mozilla-central" target="_blank">bitbucket.org</a>&nbsp;and committing to my updates to branch 'Networking Dashboard'. You can have a look at it if you want. To test these interfaces, i have made a&nbsp;temporary&nbsp;addon using jetpack without any GUI.<br /><br /><b>What am I going to do next?</b><br />First of all I am going to finish the DNS interface.<br />Since basic interfaces have been implemented, I can now start working on GUI part of the addon. On the way of doing that, I might need to make differences to the interfaces or add some new data.<br />I also want to include time stamps, size of data sent/received to above interfaces of different protocols. These two feature are very important to the addon. I will work on them after I am done giving a face to the 'Networking Dashboard' addon.<br /><br />This was an overview of my GSoC work so far. I have learnt a lot of new things about networking and Mozilla internals throughout this period. Thanks for reading. I hope you download my addon in future :)<br /><span style="background-color: white;"></span></div>